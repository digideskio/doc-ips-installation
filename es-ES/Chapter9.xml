<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "manual.ent">
<!ENTITY PRODUCT "Documentation">
<!ENTITY BOOKID "manual">
<!ENTITY YEAR "2015">
<!ENTITY HOLDER "Eneo Tecnología S.L. |">
]>
<chapter>
	<title>Creación de una Reputation Policy</title>
	
    <section>
		<title>Reputation Policies</title>
		<para>Las políticas de reputación permiten realizar acciones de bloqueo o acceso de paquetes en nuestra red por continente, país y/o IP.</para>
		<para>Para crear una Reputation Policy nos dirigimos a la sección <literal>Sensors</literal> hacemos clic en el icono de Edición
		del nivel para el que deseamos crear dicha política y seleccionamos la opción <literal>Reputation Policies.</literal></para> 
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="450" fileref="images/ch08_img022.png"/>
			</imageobject>
			<caption>
				<para>Sensors-> Reputation Policies</para>
			</caption>
		</mediaobject>
		<para>En el panel Reputation Policies se muestran todas las políticas creadas y asignadas a ese sensor o grupo. La información que se muestra es la siguiente: Nombre y propietario de la política.</para>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="450" fileref="images/ch08_img023.png"/>
			</imageobject>
			<caption>
				<para>Interfaz de Reputation Policies</para>
			</caption>
        </mediaobject>
        <section>
			<title>Acciones disponibles para la gestión de las políticas de reputación</title>
			<para>En el icono de Edición que encontramos para las políticas que se muestran en el panel de Reputation Policies encontramos las siguientes opciones:</para>
			<itemizedlist>
				<listitem>
					<para>Edit: permite editar la configuración de la política.</para>
				</listitem>
				<listitem>
					<para>Rules: esta opción nos dirige al panel de reglas.</para>
				</listitem>
				<listitem>
					<para>Clone: crea una copia de la política seleccionada.</para>
				</listitem>
			</itemizedlist>
		</section>
        <section>
			<title>Creación de una nueva Reputation Policy</title>
			<para>La creación de una nueva política de reputación se realiza desde el panel de Reputation Policies accesible desde Sensors->icono edición->Reputation Policies. 
			En esta pantalla, hacer clic en <literal>+New Rep Policy</literal>
			y completar la información que solicita el sistema: Nombre y comentarios; a continuación, hacer clic en el botón <literal>Create Reputation Policy.</literal></para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="450" fileref="images/ch08_img024.png"/>
				</imageobject>
				<caption>
					<para>Creación de una política de reputación</para>
				</caption>
			</mediaobject>
			<para><emphasis role="bold">Añadir una nueva regla de reputación a la política</emphasis></para>
			<para>Una vez que se ha creado la política de reputación accedemos a la interfaz de reglas desde la que se pueden añadir, editar y eliminar las reglas de reputación de dicha política. 
			Para crear una regla, seleccionar la opción <literal>+Add.</literal></para>
			<para>Introducir los siguientes datos y hacer clic en <literal>Create Reputation</literal> para añadir una nueva regla a la política.</para>
			<itemizedlist mark="bullet">
				<listitem>
					<para>Action</para>
					<para>-Analize: permite excluir del bloqueo (drop) una red, continente o país</para>
					<para>-Drop: bloquea el paso del paquete procedente de esa red, continente o país.</para>
					<para>-Bypass: permite el paso del paquete procedente de esa red, continente o país.</para>
				</listitem>
				<listitem>
					<para>Value/Continent/Country: insertar el valor de la IP o seleccionar en el desplegable el continente o país sobre el que se desea aplicar la acción indicada.</para>
					<para>El continente o país que se haya seleccionado aparecerá coloreado en el mapa con el color que representa la acción correspondiente.</para>
				</listitem>
			</itemizedlist>
			<para><emphasis role="bold">Opciones</emphasis></para>
			<para>Hacer clic en <literal>Options->Apply Conf</literal> para aplicar las reglas a la política de reputación recién creada.</para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="450" fileref="images/ch08_img026.png"/>
				</imageobject>
				<caption>
					<para>Reglas de reputación</para>
				</caption>
			</mediaobject>
			<para><emphasis role="bold">Opciones disponibles en el panel de reglas (Options)</emphasis></para>
			<itemizedlist mark="bullet">
				<listitem>
					<para>Apply conf: incluye las reglas recién creadas en la política correspondiente.</para>
				</listitem>
				<listitem>
					<para>Import CSV: Importar reglas de reputación para añadir a la política desde un archivo CSV <literal>(Options->Import from CSV).</literal></para>
				</listitem>
				<listitem>
					<para>Export CSV: Exporta las reglas incluidas en la política a un archivo CSV que el usuario tendrá disponible para su uso en otras aplicaciones. <literal>(Options->Import from CSV).</literal></para>
				</listitem>
			</itemizedlist>
		</section>
		<section>
			<title>Asignación de la política de reputación a un sensor</title>
			<para>Ya tenemos creada nuestra "Reputation policy". Esta se encuentra disponible para asignarla a un sensor IPS/IDS. 
			Si acabamos de crear la política y nos encontramos en la interfaz de Reputation Policies de un sensor, 
			basta con hacer clic en la opción <literal>Assign</literal> para asignar la política y a continuación, <literal>Apply Conf</literal> para aplicar la nueva configuración al sensor.</para>
			<para>Esta operación puede realizarse también desde la sección <emphasis role="bold">Sensors</emphasis> hacer clic en el icono Editar del sensor y seleccionar la opción <literal>Reputation Policies</literal>. 
			en la que repetiremos la operación antes descrita.</para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="450" fileref="images/ch08_img027.png"/>
				</imageobject>
				<caption>
					<para>Reputation Policies: políticas disponibles para un sensor</para>
				</caption>
			</mediaobject>	
			<para>Para asignar esta política al sensor  basta con pulsar el icono en el que figura la leyenda <emphasis role="bold">Assign</emphasis>. El sistema abrirá una ventana emergente avisando de 
			que la asignación de la política a ese sensor afectará a todos los "hijos" que tenga por debajo. <footnote><para>En el apartado de <emphasis role="bold">Herencias de las políticas</emphasis> se explican con detalle </para></footnote></para>
			<note>
				<title>Nota</title>
				<para>Un sensor o grupo puede ser propietario (Owner) de múltiples políticas, pero solo es posible aplicar una política para cada sensor o grupo. 
				La política asignada quedará sombreada en verde.</para>
			</note>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="450" fileref="images/ch08_img028.png"/>
				</imageobject>
				<caption>
					<para>Aplicar una política a un sensor y a todos los "hijos" que haya por debajo</para>
				</caption>
			</mediaobject>
			<para>La política seleccionada quedará sombreada en color verde. A continuación, pulsamos sobre el botón <literal>Apply Conf</literal> del menú superior para aplicar la política asignada al sensor.</para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="450" fileref="images/ch08_img029.png"/>
				</imageobject>
				<caption>
					<para>Reputation Policy aplicada a un sensor</para>
	 			</caption>
			</mediaobject>	
			<para>Una vez haya terminado el proceso de asignación, dicho sensor contará con la política aplicada.</para>			
		</section>
	</section> 
	<section>
			<title>Herencias de las políticas</title>
			<para>Como hemos visto anteriormente, <footnote><para>Consultar capítulo 5: "Sensores" para más información sobre dependencias y organización jerárquica en redBorder.</para></footnote> la organización de los elementos de red 
			creados en redBorder es jerárquica y por tanto, establece dependencias entre niveles y otros.</para>
			<para>Estas dependencias establecen un sistema de herencias que afecta tanto en la configuración como en las políticas aplicadas en cada uno de los niveles (de mayor a menor jerarquía):</para>
			<itemizedlist>
				<listitem>
					<para>Root</para>
				</listitem>
				<listitem>
					<para>Dominio</para>
				</listitem>
				<listitem>
					<para>Sensores</para>
				</listitem>
				<listitem>
					<para>Grupo</para>
				</listitem>
				<listitem>
					<para>Binding</para>
				</listitem>
			</itemizedlist>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="450" fileref="images/ch05_img003.png"/>
				</imageobject>
				<caption>
					<para>Sensors->Tree: jerarquías y dependencias entre niveles</para>
	 			</caption>
			</mediaobject>	
			<note>
				<title>Nota</title>
				<para>El sistema de herencias establece que la configuración de los niveles superiores afecta a la de aquellos "hijos" que cuelguen o dependan de ellos. En caso de que no se edite la configuración de dichos hijos,
				el sistema asignará por defecto las políticas, modos y configuraciones asignadas al nivel "padre". 
				<emphasis role="bold">El sistema de herencias se establece por tanto, desde los niveles superiores y aplicará a los niveles inferiores que cuelguen de él.</emphasis></para>
			</note>
			<para>En la sección <literal>Tools</literal> encontramos la opción de <literal>General Settings</literal> desde la cual el usuario puede establecer la configuración de los parámetros generales del Manager, 
			así como de las Apps que tenga registradas. </para>
			<para>Este es el máximo nivel de configuración (es como si se tratara del dominio <emphasis role="bold">root</emphasis>) por lo que las propiedades que aquí se definan serán heredadas 
			por el resto de dominios y sensores que se encuentren por debajo de este nivel.</para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="450" fileref="images/ch06_img004.png"/>
				</imageobject>
				<caption>
					<para>Configuración de sensores IPS/IDS heredada del "root"</para>
	 			</caption>
			</mediaobject>	
			<para>Cuando se crea un dominio o sensor o se edita por primera vez, obervaremos que algunos parámetros vienen acompañados de la etiqueta 
			<emphasis role="bold">"Inherited"</emphasis>, esto quiere decir que han heredado los valores heredados de la configuración general del Manager. 
			Para cambiar esta configuración, el usuario deberá sobreescribir esa información.</para>
			<para><emphasis role="bold">Aplicar diferentes políticas en cada uno de los niveles existentes</emphasis></para>
			<para>Una de las nuevas funcionalidades de la web redBorder es la posibilidad de crear grupos de sensores y bindings. 
			Esto aumenta la flexibilidad asociada al software, ya que, a diferencia de la anterior versión en la que una política debía aplicarse por completo para un sensor (independientemente de los segmentos creados),
			permite la formación de grupos de segmentos y bindings independientes.</para>
			<note>
				<title>Nota</title>
				<para>Gracias a los grupos de sensores y bindings, con una sola máquina, el usuario puede crear numerosos entornos para aplicar diferentes reglas.</para>
				<para><emphasis role="bold">Owner:</emphasis> establece a partir de qué nivel deben aplicarse las políticas.</para>
			</note>
			<para>Para crear o aplicar políticas de manera independiente en cada uno de los diferentes niveles que tengamos, basta con situarse en dicho nivel y realizar el proceso de creación y asignación de políticas.
			De este modo, el sistema establece, por defecto, que ese nivel es el dueño u "owner" de la política y la aplicará desde ese nivel hacia los inferiores. </para>
			<para>Al crear una nueva política se puede elegir quién será el "owner" o propietario de la misma. En este caso, nos encontraremos un desplegable en el que seleccionar el nivel desde el cual se va a aplicar.</para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="450" fileref="images/ch08_img019.png"/>
				</imageobject>
				<caption>
					<para>New Policy: determinar Owner o propietario de la política</para>
	 			</caption>
			</mediaobject>	
			<para>Para gestionar la jerarquía de los sensores y los dominios solo es necesario dirigirse a la sección <literal>Sensors</literal> (vista árbol) y mediante la acción de "selección y arrastre" situar el dominio o sensor en nivel que se desee.</para>			
        </section>
	<warning>
			<title>Advertencia</title>
			<para>Es posible crear Signature Policies a nivel de dominio, sensor, grupo y binding.</para>
			<para>En el caso de las Reputation Policies <emphasis role="bold">no es posible crear políticas a nivel de binding</emphasis> solo se pueden crear a nivel de dominio, sensor y grupo.</para>
		</warning>
</chapter>
